// Author: Drunkie
// Song: Lady Gaga - Born this way

// Set track wave to channel 0 and start
wset 0,trackwave;
chwave 0,0;
chstart 0;

// Set track wave to channel 1 and start
wset 1,trackwave2;
chwave 1,1;
chstart 1;
chvolume 1,1;

// Set bass wave to channel 2 and start
wset 2,basswave;
chwave 2,2;
chstart 2;

// Get track length
tracklen = strlen(track);

void main()
{
    // Tempo
    tempo( 600 );

    // Track
    note = 2;
    fpwr note,(track[i]/12);
    note /= 100;
    chpitch 0,note;
    
    // Track2
    note = 2;
    fpwr note,(track[i]/12);
    note /= 100;
    chpitch 1,note;
    
    // Bass
    note = 2;
    fpwr note,(bass[i]/12);
    note /= 100;
    chpitch 2,note;
    
    // Index
    i++; mod i,tracklen;
    
    jmp Main;
}

// Accurate tempo function for beats-per-minute
void tempo( float bpm )
{
    timer timestamp;
    while ((time - timestamp) < (60 / bpm)) { timer time; }
}

// Returns the length of a string
float strlen(char* str)
{
  char* strptr = str; 
  while (*strptr++);
  return (strptr - str);
}

float note, i;
float tracklen;
float time, timestamp;

string trackwave,"synth/triangle_440.wav";
string trackwave2,"synth/sine_880.wav";
string basswave,"synth/sine_440.wav";

track:

// VERSES
db -1,-1,-1,-1, 81,-1,81,-1, 81,-1,81,-1, 81,-1,81,-1, 81,-1,82,82, 82,-1,82,82, 82,-1,82,82, 82,82,-1,-1; // My mama told me when I was young
db 82,82,82,-1, -1,82,-1,82, -1,80,-1,79, -1,77,77,77, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1; // We are all super-stars
db 77,77,77,93, -1,93,-1,89, -1,89,-1,84, 84,89,89,91, 91,91,87,87, 87,87,82,82, 82,82,-1,-1; // She rolled my hair and put my lip-stick on
db 70,-1,70,-1, 70,-1,70,-1, 70,-1,72,-1, 69,69,69,69, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1; // In the glass of her bou-doir
db 77,77,81,-1, 81,-1,81,-1, 81,-1,81,-1, 81,-1,82,82, -1,82,82,-1, 82,82,82,82, -1,-1,-1,-1; // There's nothing wrong with loving who you are
db -1,77,-1,80, 80,-1,-1,82, -1,82,-1,82, -1,82,-1,81, -1,79,-1,77, 77,77,77,-1, -1,-1,-1,-1, -1,-1,-1,-1; // Cause he made you perfect babe
db 77,77,77,93, -1,93,-1,89, -1,89,-1,84, 84,89,89,91, 91,91,87,87, 87,87,82,82, 82,82,-1,-1; // So hold your head up girl and you'll go far
db -1,-1,94,-1, 94,-1,94,-1, 94,-1,94,-1, 96,-1,93,93, 93,93,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1; // Listen to me when I say

// CHORUS
db 82,-1,82,-1, 82,-1,81,-1, 77,-1,77,-1, 77,77,77,-1; // I'm beautiful in my way
db 74,-1,77,-1, 77,-1,79,-1, 77,-1,75,-1, 75,75,75,-1; // Cause god makes no mistakes
db 75,-1,75,-1, 75,-1,75,75, -1,-1,75,75, -1,-1,75,-1; // I'm on the right track baby
db 75,-1,75,-1, 77,-1,80,-1, 79,-1,77,-1, 77,77,77,77; // I was born this way
db 82,-1,82,-1, 82,-1,81,-1, 77,-1,77,-1, 77,77,77,-1; // Don't hide yourself in regret
db 74,-1,77,-1, 77,-1,79,-1, 77,-1,75,-1, 75,75,75,-1; // Just love yourself and you're set
db 75,-1,75,-1, 75,-1,75,75, -1,-1,75,75, -1,-1,75,-1; // I'm on the right track baby
db 75,-1,75,-1, 77,-1,80,-1, 79,-1,77,-1, 77,77,77,77, -1,-1,-1,-1; // I was born this way
db 77,-1,75,-1, 77,-1,75,-1, 77,-1,77,-1, 77,-1,-1,-1, -1,-1,-1,-1; // Oh there ain't no other way
db 77,-1,75,-1, 77,-1,75,-1, 77,-1,77,-1, 77,-1,-1,-1, -1,-1,-1,-1; // Baby I was born this way
db 82,-1,82,-1, 82,-1,82,-1, 82,82,-1,82, 82,81,81,81, 81,81,81,81, -1,-1,-1,-1; // Baby I was born this way
db 77,-1,75,-1, 77,-1,75,-1, 77,-1,77,-1, 77,77,-1,-1, -1,-1,-1,-1; // Oh there ain't no other way
db 77,-1,75,-1, 77,-1,75,-1, 77,-1,77,-1, 77,77,-1,-1, -1,-1,-1,-1; // Baby I was born this way
db 75,75,-1,-1, 75,75,-1,-1, 75,-1,75,-1, 75,-1,77,-1, 80,-1,79,-1, 77,-1,77,77, 77,77,-1,-1; // Right track baby I was born this way

db 0; // End string

bass: 

// VERSES
db -1,-1,-1,-1, 65,65,65,65, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 63,63,63,63, -1,-1,-1,-1, -1,-1,-1,-1;
db 70,70,70,70, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 65,65,65,65, -1,-1,-1,-1, -1,-1,65,65;
db 65,65,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 63,63,63,63, -1,-1,-1,-1, -1,-1,-1,-1;
db 70,70,70,70, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 65,65,65,65, -1,-1,-1,-1, -1,-1,65,65;
db -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 63,63,63,63, -1,-1,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,-1,-1, 63,63,63,63, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 65,65,65,65, -1,-1,-1,-1;;
db -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 63,63,63,63, -1,-1,-1,-1, -1,-1,-1,-1
db -1,-1,70,70, 70,70,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,65,65, 65,65,-1,-1, -1,-1,-1,-1;

// CHORUS
db -1,-1,-1,-1, -1,-1,65,65, 65,65,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,63,63, 63,63,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,70,70, 70,70,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,65,65, 65,65,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,65,65, 65,65,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,63,63, 63,63,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,70,70, 70,70,-1,-1, -1,-1,-1,-1;
db -1,-1,-1,-1, -1,-1,65,65, 65,65,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1;
db 65,65,65,65, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1;
db 63,63,63,63, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1;
db 70,70,70,70, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,65,65, 65,65,-1,-1;
db 65,65,65,65, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1;
db 63,63,63,63, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1;
db 70,70,70,70, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, 65,65,65,65, -1,-1,-1,-1, -1,-1,-1,-1;

db 0; // End string
